---
title: "Xamarin.iOS binding project migration"
description: "Learn how to upgrade a Xamarin.iOS binding project to a .NET iOS project."
ms.date: 08/21/2023
---

# Xamarin.iOS binding project migration

In .NET 6+, there's no concept of an iOS binding project as a separate project type. Any of the MSBuild item groups or build actions that work in Xamarin.iOS binding projects are supported through a .NET 6+ iOS app or library.

To migrate a Xamarin.iOS binding library to a .NET iOS class library:

1. In Visual Studio, create a new iOS Binding Library project with the same name as your Xamarin.iOS binding project:

    :::image type="content" source="media/ios-binding-library.png" alt-text="Screenshot of creating an iOS Binding Library project in Visual Studio.":::

    Opening the project file will confirm that you have a .NET SDK-style project:

    ```xml
    <Project Sdk="Microsoft.NET.Sdk">
      <PropertyGroup>
        <TargetFramework>net7.0-ios</TargetFramework>
        <Nullable>enable</Nullable>
        <ImplicitUsings>true</ImplicitUsings>
        <IsBindingProject>true</IsBindingProject>
      </PropertyGroup>

      <ItemGroup>
        <ObjcBindingApiDefinition Include="ApiDefinition.cs" />
        <ObjcBindingCoreSource Include="StructsAndEnums.cs" />
      </ItemGroup>
    </Project>
    ```

    > [!NOTE]
    > The project file for an iOS binding library is similar to the project file for an iOS class library.

1. Add your native library, or native framework, to the project and update the binding project file with the `<NativeReference>` item from your Xamarin.iOS binding project:

    ```xml
    <ItemGroup>
        <NativeReference Include="libXMBindingLibraryUniversal.a">
            <Kind>Static</Kind>
            <ForceLoad>True</ForceLoad>
        </NativeReference>
    </ItemGroup>
    ```

1. Copy the API definition from your Xamarin.iOS binding project to your .NET iOS binding project.
1. Copy any additional required code from your Xamarin.iOS binding project to your .NET iOS binding project.
1. In your .NET iOS binding project, replace any unsupported APIs with their .NET iOS equivalents. For more information, see [Unsupported APIs](#unsupported-apis).

## Unsupported APIs

The following Xamarin.iOS APIs have changed.

### System.nint and System.nunit

The `System.nint` and `System.nuint` types were removed from .NET iOS and replaced with the `nint` and `nuint` types, which map to `System.IntPtr` and `System.UIntPtr` respectively. Code that uses the `System.nint` and `System.nuint` types won't compile and should be replaced with the `nint` and `nuint` types. In addition, code that overloads on `System.IntPtr` and `nint`, and `System.UIntPtr` and `nuint` won't compile. In this scenarios one of the overloads should be renamed or removed.

### System.nfloat

The `System.nfloat` type was removed from .NET iOS and replaced with the `System.Runtime.InteropServices.NFloat` type. Any code that refers to `System.nfloat` will have to be modified to use `nfloat`, or the the fully qualified typename. In addition, the `nfloat.CopyArray` methods don't exist in the `System.Runtime.InteropServices.NFloat` type. Such code should be rewritten to use `Buffer.CopyMemory` instead.

### System.NMath

The `System.NMath` type has moved from the `System` namespace to the `ObjCRuntime` namespace. Therefore, code that uses the `NMath` type won't compile unless the `ObjCRuntime` namespace is imported. Alternatively, you could use methods in the `System.Math` type instead, which have overloads that take `nint` and `nuint` values.

### NSObject.Handle type change

The `NSObject.Handle` and `INativeObject.Handle` properties have changed type from `System.IntPtr` to a `ObjCRuntime.NativeHandle` struct. This means that many other parameters and return values should change type. For example:

- All objects that inherit from `Foundation.NSObject`, that have `ClassHandle` or `Handle` properties of type `IntPtr`, should change their property type to `ObjCRuntime.NativeHandle`.
- All objects that inherit from `Foundation.NSObject` or `ObjCRuntime.DisposableObject`, that have constructors that previously took a `System.IntPtr`, or a `System.IntPtr` and a `bool`, should change the `IntPtr` references to `ObjcRuntime.NativeHandle`.

There are implicit conversions between `System.IntPtr` and `ObjCRuntime.NativeHandler`, so most code should compile without changes.

### Model.AutoGeneratedName

The `Model.AutoGeneratedName` property was removed from .NET iOS. This property specified if the Objective-C type name for the model should be automatically generated. Autogenerating the Objective-C type name from the model is the default and only behavior that's available in .NET 6+.

### SceneKit.SCNMatrix4

The managed `SCNMatrix4` struct in Xamarin.iOS was a row-major matrix, while the native `SCNMatrix4` struct is a column-major matrix. This difference meant that matrices would often have to be transposed when interacting with the platform.

In .NET 6+, the managed `SCNMatrix4` struct is a column-major matrix, to match the native version. This means that any transposition that was performed when accessing Apple APIs has to be undone.

### Foundation.MonoTouchException

The `Foundation.MonoTouchException` type has been renamed to `ObjCRuntime.ObjCException`. Code that uses the `Foundation.MonoTouchException` type won't compile and should be replaced with the `ObjCRuntime.ObjCException` type.
